<!DOCTYPE html>
<html lang="en">
<head>
  <title>Entwine 3DTiles</title>
  <script src="./Build/Cesium/Cesium.js"></script>
  <style>
      @import url(./Build/Cesium/Widgets/widgets.css);
      html, body, #cesiumContainer {
          width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden;
      }
  </style>
</head>

<body>
  <div id="cesiumContainer"></div>
  <script>
    var getQueryParam = function(name) {
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(window.location.href);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    };

    var resource = getQueryParam('resource');
    if (!resource) alert('Use query parameter "resource" to select a resource');
    var viewer = new Cesium.Viewer('cesiumContainer');

    var tileset = viewer.scene.primitives.add(new Cesium.Cesium3DTileset({
        url: './data/' + resource + '/cesium'
    }));

    tileset.readyPromise.then(function() {
        console.log('Loaded tileset');
        var bounding = tileset._root._boundingVolume;
        var center = bounding.boundingSphere.center;
        var cart = Cesium.Ellipsoid.WGS84.cartesianToCartographic(center);

        var dest = Cesium.Cartesian3.fromDegrees(
                cart.longitude * (180 / Math.PI),
                cart.latitude * (180 / Math.PI),
                bounding._boundingSphere.radius * 2.2);

        viewer.camera.setView({ destination: dest });
    });
  </script>
</body>
</html>

